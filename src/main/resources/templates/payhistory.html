<!DOCTYPE html>
<html lang="zh">

<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="common :: head(~{::title})">
  <title>校园电费缴费平台-缴费记录</title>
</head>

<body>
<div class="lyear-layout-web">
  <div class="lyear-layout-container">
    <!--左侧导航-->
    <aside th:replace="common :: sidebar">
    </aside>
    <!--End 左侧导航-->


    <!--头部信息-->
    <header class="lyear-layout-header" th:replace="common :: header('用户信息-缴费记录')">
    </header>
    <!--End 头部信息-->

    <!--页面主要内容-->
    <main class="lyear-layout-content">
      <div class="container-fluid">

        <div class="card-body">
          <input type="hidden" name="page">
          <div class="search-area-payhistory">
            <div class="form-group">
              <h4><strong>账单时间段</strong></h4>
            </div>
                <div class="search-area-payhistory-left">
                  <div class="input-daterange input-group js-datepicker" data-auto-close="false" data-date-format="yyyy-mm">
                    <input class="form-control" type="date" id="search-area-payhistory-begintime" name="date1" placeholder="从">
                    <span class="input-group-addon"><i class="mdi mdi-chevron-right"></i></span>
                    <input class="form-control" type="date" id="search-area-payhistory-endtime" name="date2" placeholder="至">
                  </div>
                </div>
                <div class="search-area-payhistory-right">
                  <button class="btn btn-dark mybtn" id="search"><i class="mdi mdi-search-web"></i><strong>查询</strong></button>
                </div>

            <div class="vain-area"></div>
            <div class="table-responsive"  id="table-container" th:fragment="payhistoryList">
              <table class="table table-bordered" >
                <thead>
                <tr>
                  <th>编号</th>
                  <th>校区</th>
                  <th>楼栋</th>
                  <th>房号</th>
                  <th>时间</th>
                  <th>用电量</th>
                  <th>电费</th>
                  <th>付款时间</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="electricity,iterStat:${page.content}">
                  <td th:text="${iterStat.count}">1</td>
                  <td th:text="${electricity.payUnit.campus}">嘿嘿</td>
                  <td th:text="${electricity.payUnit.buildingNo}">海虹4栋</td>
                  <td th:text="${electricity.payUnit.dormitoryNo}">401</td>
                  <td th:text="${electricity.createTime}">2012/12</td>
                  <td th:text="${electricity.electricityConsumption}">50度</td>
                  <td th:text="${electricity.electricCharge}">100元</td>
                  <td th:text="${electricity.payTime}">2012-12-01 17：53</td>
                </tr>
                </tbody>

              </table>
              <div class="pagination">
                <a onclick="page(this)" th:attr="data-page=${page.number}-1" th:unless="${page.first}" class="btn btn-secondary btn-sm" ><i class="mdi mdi-arrow-left-thick"></i>上一页</a>
                <a onclick="page(this)" th:attr="data-page=${page.number}+1" th:unless="${page.last}"  class="btn btn-secondary btn-sm" ><i class="mdi mdi-arrow-right-thick"></i>下一页</a>
              </div>

            </div>
          </div>
    </main>
    <!--End 页面主要内容-->
  </div>
</div>



<script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/semantic-ui/2.2.4/semantic.min.js"></script>
<script>

  // 分页信息
  function page(obj) {
    $("input[name=page]").val($(obj).data("page"));
    loaddata();
    console.log( $("input[name=page]").val());
  }

  // 提交搜索
  $("#search").click(function () {
    $("input[name=page]").val(0);
    loaddata();
  });

  // 局部刷新搜索
  function  loaddata(){
    $("#table-container").load("/pay/payhistorys/search",{
      page : $("input[name=page]").val(),
      startdate:$("input[name=date1]").val(),
      enddate:$("input[name=date2]").val(),
    });

  }




</script>
</body>
</html>